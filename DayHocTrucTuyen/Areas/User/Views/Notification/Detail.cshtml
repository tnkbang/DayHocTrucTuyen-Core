
@model ThongBao
@using DayHocTrucTuyen.Models.Entities
@{
    ViewBag.Title = "Thông báo";
    ViewBag.Main = "Thông báo";
    Layout = "~/Views/Shared/_LayoutArea.cshtml";
    NguoiDung uLogin = new NguoiDung().getNguoiDung(User.Claims.First().Value);
}

<section>
    <div class="gap2 gray-bg" style="min-height: 85vh">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="featured-baner mate-black ext-low-opacity central-meta">
                        <img src="~/Content/Img/Resources/featured-top-baner.jpg" alt="">
                        <h3 class="col-12 text-center">Thông báo</h3>
                    </div>
                    <div class="row merged20" id="page-contents">
                        <div class="col-lg-9">
                            @if (Model.getSLThongBaoChuaXem() != 0)
                            {
                                <div class="central-meta">
                                    <div class="editing-interest">
                                        <span class="create-post tran-bottom"><i class="ti-bell"></i> Thông báo mới</span>
                                        <div class="notification-box">
                                            <ul>
                                                @foreach (var tb in Model.getThongBaoChuaXem())
                                                {
                                                    <li>
                                                        <a href="~/@tb.LienKet" title="" onclick="setDaXemThongBao('@tb.MaTb', '@tb.MaNd')">
                                                            <figure>
                                                                @switch (tb.NoiDung.Split('\\')[0])
                                                                {
                                                                    case "exam":
                                                                        <img width="40" height="40" src="~/Content/Img/Resources/notification-default.png" alt="" />
                                                                        break;
                                                                    case "post":
                                                                        <img width="40" height="40" src="~/Content/Img/Resources/notification-default.png" alt="" />
                                                                        break;
                                                                    default:
                                                                        <img width="40" height="40" src="~/Content/Img/Resources/notification-default.png" alt="" />
                                                                        break;
                                                                }
                                                            </figure>
                                                            <div class="notifi-meta">
                                                                <p>@tb.TieuDe - @tb.NoiDung.Split('\\')[1]</p>
                                                                <span class="timeago" title="@tb.ThoiGian.ToString("yyyy-MM-dd'T'HH:mm:ss")">@tb.ThoiGian.ToString()</span>
                                                            </div>
                                                        </a>
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            }
                            @if(Model.getSLThongBao() == 0)
                            {
                                <div class="central-meta">
                                    <div class="editing-interest">
                                        <span class="create-post tran-bottom"><i class="ti-bell"></i> Tất cả thông báo</span>
                                        <div class="notification-box text-center">
                                            Hiên không có thông báo nào!
                                        </div>
                                    </div>
                                </div>
                            }
                            else if(Model.getSLThongBaoDaXem() != 0)
                            {
                                <div class="central-meta">
                                    <div class="editing-interest">
                                        <span class="create-post tran-bottom"><i class="ti-bell"></i> Tất cả thông báo</span>
                                        <div class="notification-box">
                                            <ul>
                                                @foreach (var tb in Model.getThongBaoDaXem())
                                                {
                                                    <li>
                                                        <a href="~/@tb.LienKet" title="">
                                                            <figure>
                                                                @switch (tb.NoiDung.Split('\\')[0])
                                                                {
                                                                    case "exam":
                                                                        <img width="40" height="40" src="~/Content/Img/Resources/notification-default.png" alt="" />
                                                                        break;
                                                                    case "post":
                                                                        <img width="40" height="40" src="~/Content/Img/Resources/notification-default.png" alt="" />
                                                                        break;
                                                                    default:
                                                                        <img width="40" height="40" src="~/Content/Img/Resources/notification-default.png" alt="" />
                                                                        break;
                                                                }
                                                            </figure>
                                                            <div class="notifi-meta">
                                                                <p>@tb.TieuDe - @tb.NoiDung.Split('\\')[1]</p>
                                                                <span class="timeago" title="@tb.ThoiGian.ToString("yyyy-MM-dd'T'HH:mm:ss")">@tb.ThoiGian.ToString()</span>
                                                            </div>
                                                        </a>
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div><!-- centerl meta -->
                        <div class="col-lg-3">
                            <aside class="sidebar static">
                                <div class="widget stick-widget">
                                    <h4 class="widget-title">Liên kết</h4>
                                    <ul class="naves">
                                        <li>
                                            <i class="ti-home"></i>
                                            <a href="~/Default/Index" title="">Trang chủ</a>
                                        </li>
                                        <li>
                                            <i class="ti-user"></i>
                                            <a href="~/Profile/Info/@uLogin.MaNd" title="">Trang cá nhân</a>
                                        </li>
                                        <li>
                                            <i class="ti-bell"></i>
                                            <a href="" title="">Thông báo</a>
                                        </li>
                                        <li>
                                            <i class="ti-comments-smiley"></i>
                                            <a href="" title="">Tin nhắn</a>
                                        </li>
                                        <li>
                                            <i class="ti-view-list-alt"></i>
                                            <a href="~/Courses/Room/List" title="">Danh sách lớp</a>
                                        </li>
                                    </ul>
                                </div><!-- who's following -->
                            </aside>
                        </div><!-- sidebar -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>